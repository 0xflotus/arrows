<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="lib/d3.js"></script>
<title>Arrow Tool</title>
</head>
<body>  

<h1>Arrow Tool</h1>
<button id="button-newnode">Create Node</button>
<div id="canvas"></div>

<script type="text/javascript">

var svg = d3.select("#canvas")
    .append("svg:svg")
    .attr("width", 1024)
    .attr("height", 768);

var createNode = function() {
  var node = svg.append("svg:circle")
      .attr("cx", 50)
      .attr("cy", 140)
      .attr("r", 40)
      .attr("fill", "blue")
      .call(d3.behavior.drag().on("drag", move));
      
  node.on("click", function() {
    console.log(node);
  })
}

createNode();
d3.select("#button-newnode").on("click", createNode);
    
    
function move(){
    // this.parentNode.appendChild(this);
    var dragTarget = d3.select(this);
    dragTarget
        .attr("cx", function(){return d3.event.dx + parseInt(dragTarget.attr("cx"))})
        .attr("cy", function(){return d3.event.dy + parseInt(dragTarget.attr("cy"))});
};

</script>
   
</body>
</html>